<!doctype html>
<html><head><meta charset="UTF-8"><meta content="width=device-width, initial-scale=1.0" name="viewport"><title>quickslice - Authentication</title><meta content="quickslice - Authentication" property="og:title"><meta content="https://quickslice.slices.network/og/default.webp" property="og:image"><meta content="website" property="og:type"><meta content="summary_large_image" name="twitter:card"><link href="/styles.css" rel="stylesheet"></head><body><header class="mobile-header"><div class="mobile-header-brand"><svg xmlns="http://www.w3.org/2000/svg" class="sidebar-logo" viewBox="0 0 128 128" xmlns="http://www.w3.org/2000/svg"><g xmlns="http://www.w3.org/2000/svg" transform="translate(64, 64)"><ellipse xmlns="http://www.w3.org/2000/svg" cx="0" cy="-28" fill="#FF5722" rx="50" ry="20"></ellipse><ellipse xmlns="http://www.w3.org/2000/svg" cx="0" cy="0" fill="#00ACC1" rx="60" ry="20"></ellipse><ellipse xmlns="http://www.w3.org/2000/svg" cx="0" cy="28" fill="#32CD32" rx="40" ry="20"></ellipse></g></svg><span class="sidebar-title">quickslice</span><span class="sidebar-version">v0.17.0</span></div><button aria-label="Toggle menu" class="menu-toggle"><svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><line xmlns="http://www.w3.org/2000/svg" x1="3" x2="21" y1="6" y2="6"></line><line xmlns="http://www.w3.org/2000/svg" x1="3" x2="21" y1="12" y2="12"></line><line xmlns="http://www.w3.org/2000/svg" x1="3" x2="21" y1="18" y2="18"></line></svg></button></header><div class="sidebar-backdrop"></div><div class="container"><aside class="sidebar"><div class="sidebar-brand"><svg xmlns="http://www.w3.org/2000/svg" class="sidebar-logo" viewBox="0 0 128 128" xmlns="http://www.w3.org/2000/svg"><g xmlns="http://www.w3.org/2000/svg" transform="translate(64, 64)"><ellipse xmlns="http://www.w3.org/2000/svg" cx="0" cy="-28" fill="#FF5722" rx="50" ry="20"></ellipse><ellipse xmlns="http://www.w3.org/2000/svg" cx="0" cy="0" fill="#00ACC1" rx="60" ry="20"></ellipse><ellipse xmlns="http://www.w3.org/2000/svg" cx="0" cy="28" fill="#32CD32" rx="40" ry="20"></ellipse></g></svg><span class="sidebar-title">quickslice</span><span class="sidebar-version">v0.17.0</span></div><a class="tangled-link" href="https://tangled.sh"><svg xmlns="http://www.w3.org/2000/svg" class="sidebar-logo" viewBox="0 0 24.122343 23.274094" xmlns="http://www.w3.org/2000/svg"><g xmlns="http://www.w3.org/2000/svg" transform="translate(-0.4388285,-0.8629527)"><path xmlns="http://www.w3.org/2000/svg" d="m 16.348974,24.09935 -0.06485,-0.03766 -0.202005,-0.0106 -0.202008,-0.01048 -0.275736,-0.02601 -0.275734,-0.02602 v -0.02649 -0.02648 l -0.204577,-0.04019 -0.204578,-0.04019 -0.167616,-0.08035 -0.167617,-0.08035 -0.0014,-0.04137 -0.0014,-0.04137 -0.266473,-0.143735 -0.266475,-0.143735 -0.276098,-0.20335 -0.2761,-0.203347 -0.262064,-0.251949 -0.262064,-0.25195 -0.22095,-0.284628 -0.220948,-0.284629 -0.170253,-0.284631 -0.170252,-0.284628 -0.01341,-0.0144 -0.0134,-0.0144 -0.141982,0.161297 -0.14198,0.1613 -0.22313,0.21426 -0.223132,0.214264 -0.186025,0.146053 -0.186023,0.14605 -0.252501,0.163342 -0.252502,0.163342 -0.249014,0.115348 -0.249013,0.115336 0.0053,0.03241 0.0053,0.03241 -0.1716725,0.04599 -0.171669,0.046 -0.3379966,0.101058 -0.3379972,0.101058 -0.1778925,0.04506 -0.1778935,0.04508 -0.3913655,0.02601 -0.3913643,0.02603 -0.3557868,-0.03514 -0.3557863,-0.03514 -0.037426,-0.03029 -0.037427,-0.03029 -0.076924,0.02011 -0.076924,0.02011 -0.050508,-0.05051 -0.050405,-0.05056 L 6.6604532,23.110188 6.451745,23.063961 6.1546135,22.960559 5.8574835,22.857156 5.5319879,22.694039 5.2064938,22.530922 4.8793922,22.302961 4.5522905,22.075005 4.247598,21.786585 3.9429055,21.49817 3.7185335,21.208777 3.4941628,20.919385 3.3669822,20.705914 3.239803,20.492443 3.1335213,20.278969 3.0272397,20.065499 2.9015252,19.7275 2.7758105,19.389504 2.6925225,18.998139 2.6092345,18.606774 2.6096814,17.91299 2.6101284,17.219208 2.6744634,16.90029 2.7387984,16.581374 2.8474286,16.242088 2.9560588,15.9028 3.1137374,15.583492 3.2714148,15.264182 3.3415068,15.150766 3.4115988,15.03735 3.3127798,14.96945 3.2139618,14.90157 3.0360685,14.800239 2.8581753,14.698908 2.5913347,14.503228 2.3244955,14.307547 2.0621238,14.055599 1.7997507,13.803651 1.6111953,13.56878 1.4226411,13.333906 1.2632237,13.087474 1.1038089,12.841042 0.97442,12.575195 0.8450307,12.30935 0.724603,11.971351 0.6041766,11.633356 0.52150365,11.241991 0.4388285,10.850626 0.44091592,10.156842 0.44300333,9.4630594 0.54235911,9.0369608 0.6417149,8.6108622 0.7741173,8.2694368 0.9065196,7.9280115 1.0736303,7.6214262 1.2407515,7.3148397 1.45931,7.0191718 1.6778685,6.7235039 1.9300326,6.4611321 2.1821966,6.1987592 2.4134579,6.0137228 2.6447193,5.8286865 2.8759792,5.6776409 3.1072406,5.526594 3.4282004,5.3713977 3.7491603,5.2162016 3.9263009,5.1508695 4.1034416,5.0855373 4.2813348,4.7481598 4.4592292,4.4107823 4.6718,4.108422 4.8843733,3.8060618 5.198353,3.4805372 5.5123313,3.155014 5.7685095,2.9596425 6.0246877,2.7642722 6.329187,2.5851365 6.6336863,2.406002 6.9497657,2.2751596 7.2658453,2.1443184 7.4756394,2.0772947 7.6854348,2.01027 8.0825241,1.931086 8.4796139,1.851902 l 0.5870477,0.00291 0.5870469,0.00291 0.4447315,0.092455 0.444734,0.092455 0.302419,0.1105495 0.302417,0.1105495 0.329929,0.1646046 0.32993,0.1646033 0.239329,-0.2316919 0.239329,-0.2316919 0.160103,-0.1256767 0.160105,-0.1256767 0.160102,-0.1021909 0.160105,-0.1021899 0.142315,-0.082328 0.142314,-0.082328 0.231262,-0.1090091 0.231259,-0.1090091 0.26684,-0.098743 0.266839,-0.098743 0.320208,-0.073514 0.320209,-0.073527 0.355787,-0.041833 0.355785,-0.041834 0.426942,0.023827 0.426945,0.023828 0.355785,0.071179 0.355788,0.0711791 0.284627,0.09267 0.284629,0.09267 0.28514,0.1310267 0.28514,0.1310255 0.238179,0.1446969 0.238174,0.1446979 0.259413,0.1955332 0.259413,0.1955319 0.290757,0.296774 0.290758,0.2967753 0.151736,0.1941581 0.151734,0.1941594 0.135326,0.2149951 0.135327,0.2149952 0.154755,0.3202073 0.154758,0.3202085 0.09409,0.2677358 0.09409,0.267737 0.06948,0.3319087 0.06948,0.3319099 0.01111,0.00808 0.01111,0.00808 0.444734,0.2173653 0.444734,0.2173665 0.309499,0.2161102 0.309497,0.2161101 0.309694,0.2930023 0.309694,0.2930037 0.18752,0.2348726 0.187524,0.2348727 0.166516,0.2574092 0.166519,0.2574108 0.15273,0.3260252 0.152734,0.3260262 0.08972,0.2668403 0.08971,0.2668391 0.08295,0.3913655 0.08295,0.3913652 -6.21e-4,0.6582049 -6.21e-4,0.658204 -0.06362,0.315725 -0.06362,0.315725 -0.09046,0.289112 -0.09046,0.289112 -0.122759,0.281358 -0.12276,0.281356 -0.146626,0.252323 -0.146629,0.252322 -0.190443,0.258668 -0.190448,0.258671 -0.254911,0.268356 -0.254911,0.268355 -0.286872,0.223127 -0.286874,0.223127 -0.320203,0.187693 -0.320209,0.187693 -0.04347,0.03519 -0.04347,0.03521 0.0564,0.12989 0.0564,0.129892 0.08728,0.213472 0.08728,0.213471 0.189755,0.729363 0.189753,0.729362 0.0652,0.302417 0.0652,0.302419 -0.0018,0.675994 -0.0018,0.675995 -0.0801,0.373573 -0.08009,0.373577 -0.09,0.266839 -0.09,0.26684 -0.190389,0.391364 -0.19039,0.391366 -0.223169,0.320207 -0.223167,0.320209 -0.303585,0.315294 -0.303584,0.315291 -0.284631,0.220665 -0.284629,0.220663 -0.220128,0.132359 -0.220127,0.132358 -0.242395,0.106698 -0.242394,0.106699 -0.08895,0.04734 -0.08895,0.04733 -0.249052,0.07247 -0.24905,0.07247 -0.322042,0.0574 -0.322044,0.0574 -0.282794,-0.003 -0.282795,-0.003 -0.07115,-0.0031 -0.07115,-0.0031 -0.177894,-0.0033 -0.177893,-0.0033 -0.124528,0.02555 -0.124528,0.02555 z m -4.470079,-5.349839 0.214838,-0.01739 0.206601,-0.06782 0.206602,-0.06782 0.244389,-0.117874 0.244393,-0.11786 0.274473,-0.206822 0.27447,-0.20682 0.229308,-0.257201 0.229306,-0.2572 0.219161,-0.28463 0.219159,-0.284629 0.188541,-0.284628 0.188543,-0.28463 0.214594,-0.373574 0.214593,-0.373577 0.133861,-0.312006 0.133865,-0.312007 0.02861,-0.01769 0.02861,-0.01769 0.197275,0.26212 0.197278,0.262119 0.163613,0.150814 0.163614,0.150814 0.201914,0.09276 0.201914,0.09276 0.302417,0.01421 0.302418,0.01421 0.213472,-0.08025 0.213471,-0.08025 0.200606,-0.204641 0.200606,-0.204642 0.09242,-0.278887 0.09241,-0.278888 0.05765,-0.302418 0.05764,-0.302416 L 18.41327,13.768114 18.39502,13.34117 18.31849,12.915185 18.24196,12.4892 18.15595,12.168033 18.06994,11.846867 17.928869,11.444534 17.787801,11.042201 17.621278,10.73296 17.454757,10.423723 17.337388,10.263619 17.220021,10.103516 17.095645,9.9837986 16.971268,9.8640816 16.990048,9.6813736 17.008828,9.4986654 16.947568,9.249616 16.886308,9.0005655 16.752419,8.7159355 16.618521,8.4313217 16.435707,8.2294676 16.252892,8.0276114 16.079629,7.9004245 15.906366,7.773238 l -0.20429,0.1230127 -0.204289,0.1230121 -0.26702,0.059413 -0.267022,0.059413 -0.205761,-0.021508 -0.205766,-0.021508 -0.23495,-0.08844 -0.234953,-0.08844 -0.118429,-0.090334 -0.118428,-0.090333 h -0.03944 -0.03944 L 13.711268,7.8540732 13.655958,7.9706205 13.497227,8.1520709 13.338499,8.3335203 13.168394,8.4419112 12.998289,8.550301 12.777045,8.624223 12.5558,8.698155 H 12.275611 11.995429 L 11.799973,8.6309015 11.604513,8.5636472 11.491311,8.5051061 11.37811,8.446565 11.138172,8.2254579 10.898231,8.0043497 l -0.09565,-0.084618 -0.09565,-0.084613 -0.218822,0.198024 -0.218822,0.1980231 -0.165392,0.078387 -0.1653925,0.078387 -0.177894,0.047948 -0.177892,0.047948 L 9.3635263,8.4842631 9.144328,8.4846889 8.9195029,8.4147138 8.6946778,8.3447386 8.5931214,8.4414036 8.491565,8.5380686 8.3707618,8.7019598 8.2499597,8.8658478 8.0802403,8.9290726 7.9105231,8.9922974 7.7952769,9.0780061 7.6800299,9.1637148 7.5706169,9.2778257 7.4612038,9.3919481 7.1059768,9.9205267 6.7507497,10.449105 l -0.2159851,0.449834 -0.2159839,0.449834 -0.2216572,0.462522 -0.2216559,0.462523 -0.1459343,0.337996 -0.1459342,0.337998 -0.055483,0.220042 -0.055483,0.220041 -0.015885,0.206903 -0.015872,0.206901 0.034307,0.242939 0.034307,0.24294 0.096281,0.196632 0.096281,0.196634 0.143607,0.125222 0.1436071,0.125222 0.1873143,0.08737 0.1873141,0.08737 0.2752084,0.002 0.2752084,0.002 0.2312297,-0.09773 0.231231,-0.09772 0.1067615,-0.07603 0.1067614,-0.07603 0.3679062,-0.29377 0.3679065,-0.293771 0.026804,0.01656 0.026804,0.01656 0.023626,0.466819 0.023626,0.466815 0.088326,0.513195 0.088326,0.513193 0.08897,0.364413 0.08897,0.364411 0.1315362,0.302418 0.1315352,0.302418 0.1051964,0.160105 0.1051954,0.160103 0.1104741,0.11877 0.1104731,0.118769 0.2846284,0.205644 0.2846305,0.205642 0.144448,0.07312 0.144448,0.07312 0.214787,0.05566 0.214787,0.05566 0.245601,0.03075 0.245602,0.03075 0.204577,-0.0125 0.204578,-0.0125 z m 0.686342,-3.497495 -0.11281,-0.06077 -0.106155,-0.134033 -0.106155,-0.134031 -0.04406,-0.18371 -0.04406,-0.183707 0.02417,-0.553937 0.02417,-0.553936 0.03513,-0.426945 0.03513,-0.426942 0.07225,-0.373576 0.07225,-0.373575 0.05417,-0.211338 0.05417,-0.211339 0.0674,-0.132112 0.0674,-0.132112 0.132437,-0.10916 0.132437,-0.109161 0.187436,-0.04195 0.187438,-0.04195 0.170366,0.06469 0.170364,0.06469 0.114312,0.124073 0.114313,0.124086 0.04139,0.18495 0.04139,0.184951 -0.111218,0.459845 -0.111219,0.459844 -0.03383,0.26584 -0.03382,0.265841 -0.03986,0.818307 -0.03986,0.818309 -0.0378,0.15162 -0.03779,0.151621 -0.11089,0.110562 -0.110891,0.110561 -0.114489,0.04913 -0.114489,0.04913 -0.187932,-0.0016 -0.187929,-0.0016 z m -2.8087655,-0.358124 -0.146445,-0.06848 -0.088025,-0.119502 -0.088024,-0.119502 -0.038581,-0.106736 -0.038581,-0.106736 -0.02237,-0.134956 -0.02239,-0.134957 -0.031955,-0.46988 -0.031955,-0.469881 0.036203,-0.444733 0.036203,-0.444731 0.048862,-0.215257 0.048862,-0.215255 0.076082,-0.203349 0.076081,-0.203348 0.0936,-0.111244 0.0936,-0.111245 0.143787,-0.06531 0.1437865,-0.06532 h 0.142315 0.142314 l 0.142314,0.06588 0.142316,0.06588 0.093,0.102325 0.093,0.102325 0.04042,0.120942 0.04042,0.120942 v 0.152479 0.152477 l -0.03347,0.08804 -0.03347,0.08805 -0.05693,0.275653 -0.05693,0.275651 2.11e-4,0.430246 2.12e-4,0.430243 0.04294,0.392646 0.04295,0.392647 -0.09189,0.200702 -0.09189,0.200702 -0.148688,0.0984 -0.148687,0.0984 -0.20136,0.01212 -0.2013595,0.01212 z" fill="currentColor"></path></g></svg><span>tangled.sh</span></a><div class="search-container"><input class="search-input" id="search-input" placeholder="Search docs..." type="text"><div class="search-results" id="search-results"></div></div><nav><div class="sidebar-group"><div class="sidebar-group-label">Getting Started</div><ul><li><a href="/">Introduction</a></li><li><a href="/tutorial">Tutorial</a></li></ul></div><div class="sidebar-group"><div class="sidebar-group-label">Guides</div><ul><li><a href="/guides/queries">Queries</a></li><li><a href="/guides/joins">Joins</a></li><li><a href="/guides/mutations">Mutations</a></li><li><a class="active" href="/guides/authentication">Authentication</a></li><li><a href="/guides/deployment">Deployment</a></li><li><a href="/guides/patterns">Patterns</a></li><li><a href="/guides/troubleshooting">Troubleshooting</a></li></ul></div><div class="sidebar-group"><div class="sidebar-group-label">Reference</div><ul><li><a href="/reference/aggregations">Aggregations</a></li><li><a href="/reference/subscriptions">Subscriptions</a></li><li><a href="/reference/blobs">Blobs</a></li><li><a href="/reference/variables">Variables</a></li><li><a href="/reference/mcp">MCP</a></li></ul></div></nav></aside><main class="content"><div><div><h1 id="Authentication">Authentication</h1>
<p>Quickslice proxies OAuth between your app and users' Personal Data Servers (PDS). Your app never handles AT Protocol credentials directly.</p>
<h2 id="How-It-Works"><a href="#How-It-Works" class="header-anchor">#</a>How It Works</h2>
<ol>
<li>User clicks login in your app</li>
<li>Your app redirects to Quickslice's <code>/oauth/authorize</code> endpoint</li>
<li>Quickslice redirects to the user's PDS for authorization</li>
<li>User enters credentials and approves your app</li>
<li>PDS redirects back to Quickslice with an auth code</li>
<li>Quickslice exchanges the code for tokens</li>
<li>Quickslice redirects back to your app with a code</li>
<li>Your app exchanges the code for an access token</li>
</ol>
<p>The access token authorizes mutations that write to the user's repository.</p>
<h2 id="Setting-Up-OAuth"><a href="#Setting-Up-OAuth" class="header-anchor">#</a>Setting Up OAuth</h2>
<h3 id="Generate-a-Signing-Key"><a href="#Generate-a-Signing-Key" class="header-anchor">#</a>Generate a Signing Key</h3>
<p>Quickslice needs a private key to sign OAuth tokens. Generate one with <code>goat</code>:</p>
<pre class="shiki quickslice" style="background-color:#1c1c1c;color:#dedede" tabindex="0"><code><span class="line"><span style="color:#5EEBD8">brew</span><span style="color:#8CDB8C"> install</span><span style="color:#8CDB8C"> goat</span></span>
<span class="line"><span style="color:#5EEBD8">goat</span><span style="color:#8CDB8C"> key</span><span style="color:#8CDB8C"> generate</span><span style="color:#8CDB8C"> -t</span><span style="color:#8CDB8C"> p256</span></span>
<span class="line"></span></code></pre>
<p>Set the output as your <code>OAUTH_SIGNING_KEY</code> environment variable.</p>
<h3 id="Register-an-OAuth-Client"><a href="#Register-an-OAuth-Client" class="header-anchor">#</a>Register an OAuth Client</h3>
<ol>
<li>Open your Quickslice instance and navigate to <strong>Settings</strong></li>
<li>Scroll to <strong>OAuth Clients</strong> and click <strong>Register New Client</strong></li>
<li>Fill in the form:
<ul>
<li><strong>Client Name</strong>: Your app's name</li>
</ul>
<ul>
<li><strong>Client Type</strong>: Public (browser apps) or Confidential (server apps)</li>
</ul>
<ul>
<li><strong>Redirect URIs</strong>: Where users return after auth (e.g., <code>http://localhost:3000</code>)</li>
</ul>
<ul>
<li><strong>Scope</strong>: Leave as <code>atproto transition:generic</code></li>
</ul>
</li>
<li>Copy the <strong>Client ID</strong></li>
</ol>
<h3 id="Public-vs-Confidential-Clients"><a href="#Public-vs-Confidential-Clients" class="header-anchor">#</a>Public vs Confidential Clients</h3>
<table>
<thead>
<tr>
<th>Type</th>
<th>Use Case</th>
<th>Secret</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Public</strong></td>
<td>Browser apps, mobile apps</td>
<td>No secret (client cannot secure it)</td>
</tr>
<tr>
<td><strong>Confidential</strong></td>
<td>Server-side apps, backend services</td>
<td>Secret (stored securely on server)</td>
</tr>
</tbody>
</table>
<h2 id="Using-the-Client-SDK"><a href="#Using-the-Client-SDK" class="header-anchor">#</a>Using the Client SDK</h2>
<p>The Quickslice client SDK handles OAuth, PKCE, DPoP, token refresh, and GraphQL requests.</p>
<h3 id="Install"><a href="#Install" class="header-anchor">#</a>Install</h3>
<pre class="shiki quickslice" style="background-color:#1c1c1c;color:#dedede" tabindex="0"><code><span class="line"><span style="color:#5EEBD8">npm</span><span style="color:#8CDB8C"> install</span><span style="color:#8CDB8C"> quickslice-client-js</span></span>
<span class="line"></span></code></pre>
<p>Or via CDN:</p>
<pre class="shiki quickslice" style="background-color:#1c1c1c;color:#dedede" tabindex="0"><code><span class="line"><span style="color:#9A9A9A">&#x3C;</span><span style="color:#5EEBD8">script</span><span style="color:#7EB3D8"> src</span><span style="color:#9A9A9A">=</span><span style="color:#9A9A9A">"</span><span style="color:#8CDB8C">https://unpkg.com/quickslice-client-js/dist/quickslice-client.min.js</span><span style="color:#9A9A9A">"</span><span style="color:#9A9A9A">>&#x3C;/</span><span style="color:#5EEBD8">script</span><span style="color:#9A9A9A">></span></span>
<span class="line"></span></code></pre>
<h3 id="Initialize"><a href="#Initialize" class="header-anchor">#</a>Initialize</h3>
<pre class="shiki quickslice" style="background-color:#1c1c1c;color:#dedede" tabindex="0"><code><span class="line"><span style="color:#F07068">import</span><span style="color:#9A9A9A"> {</span><span style="color:#DEDEDE"> createQuicksliceClient </span><span style="color:#9A9A9A">}</span><span style="color:#F07068"> from</span><span style="color:#9A9A9A"> '</span><span style="color:#8CDB8C">quickslice-client</span><span style="color:#9A9A9A">'</span><span style="color:#9A9A9A">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07068">const</span><span style="color:#DEDEDE"> client </span><span style="color:#9A9A9A">=</span><span style="color:#F07068"> await</span><span style="color:#5EEBD8"> createQuicksliceClient</span><span style="color:#9A9A9A">({</span></span>
<span class="line"><span style="color:#7EB3D8">  server</span><span style="color:#9A9A9A">:</span><span style="color:#9A9A9A"> "</span><span style="color:#8CDB8C">https://yourapp.slices.network</span><span style="color:#9A9A9A">"</span><span style="color:#9A9A9A">,</span></span>
<span class="line"><span style="color:#7EB3D8">  clientId</span><span style="color:#9A9A9A">:</span><span style="color:#9A9A9A"> "</span><span style="color:#8CDB8C">YOUR_CLIENT_ID</span><span style="color:#9A9A9A">"</span><span style="color:#9A9A9A">,</span></span>
<span class="line"><span style="color:#9A9A9A">});</span></span>
<span class="line"></span></code></pre>
<h3 id="Login"><a href="#Login" class="header-anchor">#</a>Login</h3>
<pre class="shiki quickslice" style="background-color:#1c1c1c;color:#dedede" tabindex="0"><code><span class="line"><span style="color:#F07068">await</span><span style="color:#DEDEDE"> client</span><span style="color:#9A9A9A">.</span><span style="color:#5EEBD8">loginWithRedirect</span><span style="color:#9A9A9A">({</span></span>
<span class="line"><span style="color:#7EB3D8">  handle</span><span style="color:#9A9A9A">:</span><span style="color:#9A9A9A"> "</span><span style="color:#8CDB8C">alice.bsky.social</span><span style="color:#9A9A9A">"</span><span style="color:#9A9A9A">,</span></span>
<span class="line"><span style="color:#9A9A9A">});</span></span>
<span class="line"></span></code></pre>
<h3 id="Handle-the-Callback"><a href="#Handle-the-Callback" class="header-anchor">#</a>Handle the Callback</h3>
<p>After authentication, the user returns to your redirect URI:</p>
<pre class="shiki quickslice" style="background-color:#1c1c1c;color:#dedede" tabindex="0"><code><span class="line"><span style="color:#F07068">if</span><span style="color:#9A9A9A"> (</span><span style="color:#DEDEDE">window</span><span style="color:#9A9A9A">.</span><span style="color:#DEDEDE">location</span><span style="color:#9A9A9A">.</span><span style="color:#DEDEDE">search</span><span style="color:#9A9A9A">.</span><span style="color:#5EEBD8">includes</span><span style="color:#9A9A9A">(</span><span style="color:#9A9A9A">"</span><span style="color:#8CDB8C">code=</span><span style="color:#9A9A9A">"</span><span style="color:#9A9A9A">))</span><span style="color:#9A9A9A"> {</span></span>
<span class="line"><span style="color:#F07068">  await</span><span style="color:#DEDEDE"> client</span><span style="color:#9A9A9A">.</span><span style="color:#5EEBD8">handleRedirectCallback</span><span style="color:#9A9A9A">();</span></span>
<span class="line"><span style="color:#9A9A9A">}</span></span>
<span class="line"></span></code></pre>
<h3 id="Check-Authentication-State"><a href="#Check-Authentication-State" class="header-anchor">#</a>Check Authentication State</h3>
<pre class="shiki quickslice" style="background-color:#1c1c1c;color:#dedede" tabindex="0"><code><span class="line"><span style="color:#F07068">const</span><span style="color:#DEDEDE"> isLoggedIn </span><span style="color:#9A9A9A">=</span><span style="color:#F07068"> await</span><span style="color:#DEDEDE"> client</span><span style="color:#9A9A9A">.</span><span style="color:#5EEBD8">isAuthenticated</span><span style="color:#9A9A9A">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07068">if</span><span style="color:#9A9A9A"> (</span><span style="color:#DEDEDE">isLoggedIn</span><span style="color:#9A9A9A">)</span><span style="color:#9A9A9A"> {</span></span>
<span class="line"><span style="color:#F07068">  const</span><span style="color:#DEDEDE"> user </span><span style="color:#9A9A9A">=</span><span style="color:#DEDEDE"> client</span><span style="color:#9A9A9A">.</span><span style="color:#5EEBD8">getUser</span><span style="color:#9A9A9A">();</span></span>
<span class="line"><span style="color:#DEDEDE">  console</span><span style="color:#9A9A9A">.</span><span style="color:#5EEBD8">log</span><span style="color:#9A9A9A">(</span><span style="color:#DEDEDE">user</span><span style="color:#9A9A9A">.</span><span style="color:#DEDEDE">did</span><span style="color:#9A9A9A">);</span><span style="color:#6B6B6B;font-style:italic">  // "did:plc:abc123..."</span></span>
<span class="line"><span style="color:#9A9A9A">}</span></span>
<span class="line"></span></code></pre>
<h3 id="Logout"><a href="#Logout" class="header-anchor">#</a>Logout</h3>
<pre class="shiki quickslice" style="background-color:#1c1c1c;color:#dedede" tabindex="0"><code><span class="line"><span style="color:#F07068">await</span><span style="color:#DEDEDE"> client</span><span style="color:#9A9A9A">.</span><span style="color:#5EEBD8">logout</span><span style="color:#9A9A9A">();</span></span>
<span class="line"></span></code></pre>
<h2 id="Making-Authenticated-Requests"><a href="#Making-Authenticated-Requests" class="header-anchor">#</a>Making Authenticated Requests</h2>
<h3 id="With-the-SDK"><a href="#With-the-SDK" class="header-anchor">#</a>With the SDK</h3>
<p>The SDK adds authentication headers automatically:</p>
<pre class="shiki quickslice" style="background-color:#1c1c1c;color:#dedede" tabindex="0"><code><span class="line"><span style="color:#6B6B6B;font-style:italic">// Public query (no auth needed)</span></span>
<span class="line"><span style="color:#F07068">const</span><span style="color:#DEDEDE"> data </span><span style="color:#9A9A9A">=</span><span style="color:#F07068"> await</span><span style="color:#DEDEDE"> client</span><span style="color:#9A9A9A">.</span><span style="color:#5EEBD8">publicQuery</span><span style="color:#9A9A9A">(</span><span style="color:#9A9A9A">`</span></span>
<span class="line"><span style="color:#8CDB8C">  query { xyzStatusphereStatus { edges { node { status } } } }</span></span>
<span class="line"><span style="color:#9A9A9A">`</span><span style="color:#9A9A9A">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6B6B6B;font-style:italic">// Authenticated query</span></span>
<span class="line"><span style="color:#F07068">const</span><span style="color:#DEDEDE"> viewer </span><span style="color:#9A9A9A">=</span><span style="color:#F07068"> await</span><span style="color:#DEDEDE"> client</span><span style="color:#9A9A9A">.</span><span style="color:#5EEBD8">query</span><span style="color:#9A9A9A">(</span><span style="color:#9A9A9A">`</span></span>
<span class="line"><span style="color:#8CDB8C">  query { viewer { did handle } }</span></span>
<span class="line"><span style="color:#9A9A9A">`</span><span style="color:#9A9A9A">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6B6B6B;font-style:italic">// Mutation (requires auth)</span></span>
<span class="line"><span style="color:#F07068">const</span><span style="color:#DEDEDE"> result </span><span style="color:#9A9A9A">=</span><span style="color:#F07068"> await</span><span style="color:#DEDEDE"> client</span><span style="color:#9A9A9A">.</span><span style="color:#5EEBD8">mutate</span><span style="color:#9A9A9A">(</span><span style="color:#9A9A9A">`</span></span>
<span class="line"><span style="color:#8CDB8C">  mutation { createXyzStatusphereStatus(input: { status: "ðŸŽ‰", createdAt: "</span><span style="color:#9A9A9A">${</span><span style="color:#9A9A9A">new</span><span style="color:#5EEBD8"> Date</span><span style="color:#9A9A9A">().</span><span style="color:#5EEBD8">toISOString</span><span style="color:#9A9A9A">()</span><span style="color:#9A9A9A">}</span><span style="color:#8CDB8C">" }) { uri } }</span></span>
<span class="line"><span style="color:#9A9A9A">`</span><span style="color:#9A9A9A">);</span></span>
<span class="line"></span></code></pre>
<h3 id="Without-the-SDK"><a href="#Without-the-SDK" class="header-anchor">#</a>Without the SDK</h3>
<p>Without the SDK, include headers based on your OAuth flow:</p>
<p><strong>DPoP flow</strong> (public clients):</p>
<pre><code>Authorization: DPoP &lt;access_token&gt;
DPoP: &lt;dpop_proof&gt;
</code></pre>
<p><strong>Bearer token flow</strong> (confidential clients):</p>
<pre><code>Authorization: Bearer &lt;access_token&gt;
</code></pre>
<h2 id="The-Viewer-Query"><a href="#The-Viewer-Query" class="header-anchor">#</a>The Viewer Query</h2>
<p>The <code>viewer</code> query returns the authenticated user:</p>
<pre class="shiki quickslice" style="background-color:#1c1c1c;color:#dedede" tabindex="0"><code><span class="line"><span style="color:#F07068">query</span><span style="color:#9A9A9A"> {</span></span>
<span class="line"><span style="color:#DEDEDE">  viewer </span><span style="color:#9A9A9A">{</span></span>
<span class="line"><span style="color:#DEDEDE">    did</span></span>
<span class="line"><span style="color:#DEDEDE">    handle</span></span>
<span class="line"><span style="color:#DEDEDE">    appBskyActorProfileByDid </span><span style="color:#9A9A9A">{</span></span>
<span class="line"><span style="color:#DEDEDE">      displayName</span></span>
<span class="line"><span style="color:#DEDEDE">      avatar </span><span style="color:#9A9A9A">{</span><span style="color:#DEDEDE"> url </span><span style="color:#9A9A9A">}</span></span>
<span class="line"><span style="color:#9A9A9A">    }</span></span>
<span class="line"><span style="color:#9A9A9A">  }</span></span>
<span class="line"><span style="color:#9A9A9A">}</span></span>
<span class="line"></span></code></pre>
<p>Returns <code>null</code> when not authenticated (no error thrown).</p>
<h2 id="Security-PKCE-and-DPoP"><a href="#Security-PKCE-and-DPoP" class="header-anchor">#</a>Security: PKCE and DPoP</h2>
<p>The SDK implements two security mechanisms for browser apps:</p>
<p><strong>PKCE (Proof Key for Code Exchange)</strong> prevents authorization code interception. Before redirecting, the SDK generates a random secret and sends only its hash to the server. When exchanging the code for tokens, the SDK proves it initiated the request.</p>
<p><strong>DPoP (Demonstrating Proof-of-Possession)</strong> binds tokens to a cryptographic key in your browser. Each request includes a signed proof. An attacker who steals your access token cannot use it without the key.</p>
<h2 id="OAuth-Endpoints"><a href="#OAuth-Endpoints" class="header-anchor">#</a>OAuth Endpoints</h2>
<ul>
<li><code>GET /oauth/authorize</code> - Start the OAuth flow</li>
<li><code>POST /oauth/token</code> - Exchange authorization code for tokens</li>
<li><code>GET /.well-known/oauth-authorization-server</code> - Server metadata</li>
<li><code>GET /oauth/oauth-client-metadata.json</code> - Client metadata</li>
</ul>
</div><nav class="page-nav"><a class="page-nav-link page-nav-prev" href="/guides/mutations"><span class="page-nav-label">Previous</span><span class="page-nav-title">Mutations</span></a><a class="page-nav-link page-nav-next" href="/guides/deployment"><span class="page-nav-label">Next</span><span class="page-nav-title">Deployment</span></a></nav></div><nav aria-label="Page sections" class="minimap"><div class="minimap-header">On this page</div><a class="minimap-item" data-target-id="How-It-Works" href="#How-It-Works">How It Works</a><a class="minimap-item" data-target-id="Setting-Up-OAuth" href="#Setting-Up-OAuth">Setting Up OAuth</a><a class="minimap-item minimap-item-sub" data-target-id="Generate-a-Signing-Key" href="#Generate-a-Signing-Key">Generate a Signing Key</a><a class="minimap-item minimap-item-sub" data-target-id="Register-an-OAuth-Client" href="#Register-an-OAuth-Client">Register an OAuth Client</a><a class="minimap-item minimap-item-sub" data-target-id="Public-vs-Confidential-Clients" href="#Public-vs-Confidential-Clients">Public vs Confidential Clients</a><a class="minimap-item" data-target-id="Using-the-Client-SDK" href="#Using-the-Client-SDK">Using the Client SDK</a><a class="minimap-item minimap-item-sub" data-target-id="Install" href="#Install">Install</a><a class="minimap-item minimap-item-sub" data-target-id="Initialize" href="#Initialize">Initialize</a><a class="minimap-item minimap-item-sub" data-target-id="Login" href="#Login">Login</a><a class="minimap-item minimap-item-sub" data-target-id="Handle-the-Callback" href="#Handle-the-Callback">Handle the Callback</a><a class="minimap-item minimap-item-sub" data-target-id="Check-Authentication-State" href="#Check-Authentication-State">Check Authentication State</a><a class="minimap-item minimap-item-sub" data-target-id="Logout" href="#Logout">Logout</a><a class="minimap-item" data-target-id="Making-Authenticated-Requests" href="#Making-Authenticated-Requests">Making Authenticated Requests</a><a class="minimap-item minimap-item-sub" data-target-id="With-the-SDK" href="#With-the-SDK">With the SDK</a><a class="minimap-item minimap-item-sub" data-target-id="Without-the-SDK" href="#Without-the-SDK">Without the SDK</a><a class="minimap-item" data-target-id="The-Viewer-Query" href="#The-Viewer-Query">The Viewer Query</a><a class="minimap-item" data-target-id="Security-PKCE-and-DPoP" href="#Security-PKCE-and-DPoP">Security: PKCE and DPoP</a><a class="minimap-item" data-target-id="OAuth-Endpoints" href="#OAuth-Endpoints">OAuth Endpoints</a></nav></main></div><script src="/mobile-nav.js"></script><script src="/minimap.js"></script><script src="/fuse.min.js"></script><script src="/search.js"></script></body></html>