<!doctype html>
<html><head><meta charset="UTF-8"><meta content="width=device-width, initial-scale=1.0" name="viewport"><title>quickslice - Subscriptions</title><link href="/styles.css" rel="stylesheet"></head><body><button aria-label="Toggle menu" class="menu-toggle"><svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><line xmlns="http://www.w3.org/2000/svg" x1="3" x2="21" y1="6" y2="6"></line><line xmlns="http://www.w3.org/2000/svg" x1="3" x2="21" y1="12" y2="12"></line><line xmlns="http://www.w3.org/2000/svg" x1="3" x2="21" y1="18" y2="18"></line></svg></button><div class="sidebar-backdrop"></div><div class="container"><aside class="sidebar"><div class="sidebar-brand"><svg xmlns="http://www.w3.org/2000/svg" class="sidebar-logo" viewBox="0 0 128 128" xmlns="http://www.w3.org/2000/svg"><defs xmlns="http://www.w3.org/2000/svg"><linearGradient xmlns="http://www.w3.org/2000/svg" id="board1" x1="0%" x2="100%" y1="0%" y2="100%"><stop xmlns="http://www.w3.org/2000/svg" offset="0%" stop-color="#FF6347" stop-opacity="1"></stop><stop xmlns="http://www.w3.org/2000/svg" offset="100%" stop-color="#FF4500" stop-opacity="1"></stop></linearGradient><linearGradient xmlns="http://www.w3.org/2000/svg" id="board2" x1="0%" x2="100%" y1="0%" y2="100%"><stop xmlns="http://www.w3.org/2000/svg" offset="0%" stop-color="#00CED1" stop-opacity="1"></stop><stop xmlns="http://www.w3.org/2000/svg" offset="100%" stop-color="#4682B4" stop-opacity="1"></stop></linearGradient></defs><g xmlns="http://www.w3.org/2000/svg" transform="translate(64, 64)"><ellipse xmlns="http://www.w3.org/2000/svg" cx="0" cy="-28" fill="url(#board1)" rx="50" ry="20"></ellipse><ellipse xmlns="http://www.w3.org/2000/svg" cx="0" cy="0" fill="url(#board2)" rx="60" ry="20"></ellipse><ellipse xmlns="http://www.w3.org/2000/svg" cx="0" cy="28" fill="#32CD32" rx="40" ry="20"></ellipse></g></svg><span class="sidebar-title">quickslice</span></div><nav><ul><li><a href="/">Getting Started</a></li><li><a href="/authentication">Authentication</a></li><li><a href="/queries">Queries</a></li><li><a href="/mutations">Mutations</a></li><li><a href="/joins">Joins</a></li><li><a href="/aggregations">Aggregations</a></li><li><a class="active" href="/subscriptions">Subscriptions</a></li><li><a href="/blobs">Blobs</a></li><li><a href="/variables">Variables</a></li><li><a href="/deployment">Deployment</a></li><li><a href="/mcp">MCP</a></li></ul></nav></aside><main class="content"><div><h1 id="Subscriptions">Subscriptions</h1>
<blockquote>
<p><strong>Note:</strong> Subscriptions require a WebSocket connection. Connect to <code>/graphql</code> using the <a href="https://github.com/enisdenjo/graphql-ws/blob/master/PROTOCOL.md"><code>graphql-ws</code></a> protocol.</p>
</blockquote>
<h2 id="Basic-Subscription">Basic Subscription</h2>
<p>Subscribe to new records:</p>
<pre><code class="language-graphql">subscription {
  xyzStatusphereStatusCreated {
    uri
    status
    createdAt
  }
}
</code></pre>
<h2 id="Field-Selection">Field Selection</h2>
<p>Request only the fields you need:</p>
<pre><code class="language-graphql">subscription {
  xyzStatusphereStatusCreated {
    status
  }
}
</code></pre>
<p>Response:</p>
<pre><code class="language-json">{
  &quot;data&quot;: {
    &quot;xyzStatusphereStatusCreated&quot;: {
      &quot;status&quot;: &quot;ðŸš€&quot;
    }
  }
}
</code></pre>
<h2 id="Named-Subscription">Named Subscription</h2>
<pre><code class="language-graphql">subscription OnNewStatus {
  xyzStatusphereStatusCreated {
    uri
    status
    actorHandle
  }
}
</code></pre>
<h2 id="Subscription-Types">Subscription Types</h2>
<p>Each collection has three subscription fields:</p>
<ul>
<li><code>{collection}Created</code> - Fires when a new record is created</li>
<li><code>{collection}Updated</code> - Fires when a record is updated</li>
<li><code>{collection}Deleted</code> - Fires when a record is deleted</li>
</ul>
<h3 id="Examples">Examples</h3>
<pre><code class="language-graphql"># New status created
subscription {
  xyzStatusphereStatusCreated {
    uri
    status
  }
}

# Status updated
subscription {
  xyzStatusphereStatusUpdated {
    uri
    status
  }
}

# Status deleted
subscription {
  xyzStatusphereStatusDeleted {
    uri
  }
}
</code></pre>
<h2 id="With-Joins">With Joins</h2>
<p>Subscriptions support joins like queries:</p>
<pre><code class="language-graphql">subscription {
  xyzStatusphereStatusCreated {
    uri
    status
    appBskyActorProfileByDid {
      displayName
      avatar {
        url
      }
    }
  }
}
</code></pre>
<p>Response:</p>
<pre><code class="language-json">{
  &quot;data&quot;: {
    &quot;xyzStatusphereStatusCreated&quot;: {
      &quot;uri&quot;: &quot;at://did:plc:abc123/xyz.statusphere.status/3m4vk4wi&quot;,
      &quot;status&quot;: &quot;ðŸŽ‰ Just shipped!&quot;,
      &quot;appBskyActorProfileByDid&quot;: {
        &quot;displayName&quot;: &quot;Alice&quot;,
        &quot;avatar&quot;: {
          &quot;url&quot;: &quot;https://cdn.bsky.app/img/avatar/plain/did:plc:abc123/bafyrei...&quot;
        }
      }
    }
  }
}
</code></pre>
<h2 id="WebSocket-Protocol">WebSocket Protocol</h2>
<h3 id="1-Connect">1. Connect</h3>
<pre><code>ws://localhost:8080/graphql
</code></pre>
<h3 id="2-Initialize">2. Initialize</h3>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;connection_init&quot;
}
</code></pre>
<h3 id="3-Subscribe">3. Subscribe</h3>
<pre><code class="language-json">{
  &quot;id&quot;: &quot;1&quot;,
  &quot;type&quot;: &quot;subscribe&quot;,
  &quot;payload&quot;: {
    &quot;query&quot;: &quot;subscription { xyzStatusphereStatusCreated { uri status } }&quot;
  }
}
</code></pre>
<h3 id="4-Receive-Events">4. Receive Events</h3>
<pre><code class="language-json">{
  &quot;id&quot;: &quot;1&quot;,
  &quot;type&quot;: &quot;next&quot;,
  &quot;payload&quot;: {
    &quot;data&quot;: {
      &quot;xyzStatusphereStatusCreated&quot;: {
        &quot;uri&quot;: &quot;at://...&quot;,
        &quot;status&quot;: &quot;Hello!&quot;
      }
    }
  }
}
</code></pre>
<h3 id="5-Unsubscribe">5. Unsubscribe</h3>
<pre><code class="language-json">{
  &quot;id&quot;: &quot;1&quot;,
  &quot;type&quot;: &quot;complete&quot;
}
</code></pre>
</div></main></div><script src="/highlight.js"></script><script src="/mobile-nav.js"></script><script src="/minimap.js"></script></body></html>