# OAuth Configuration
# SECRET_KEY_BASE: Must be at least 64 characters. Generate with: openssl rand -base64 48
# IMPORTANT: This MUST be persistent across server restarts or sessions will be invalidated
SECRET_KEY_BASE=CHANGE_ME_TO_A_RANDOM_64_CHARACTER_STRING

# External Base URL - used to construct the OAuth redirect URI and client metadata URL
# The redirect URI will be: ${EXTERNAL_BASE_URL}/oauth/callback
# Defaults to http://localhost:8080 if not set
# For loopback mode, use 127.0.0.1 (not localhost) per RFC 8252
# EXTERNAL_BASE_URL=http://127.0.0.1:8080

# OAuth Loopback Mode - when true, uses loopback client IDs for local development
# This allows OAuth to work without ngrok/tunnels by using the special client ID format:
#   http://localhost/?redirect_uri=http://127.0.0.1:8080/...&scope=atproto
# The remote PDS doesn't need to fetch client metadata in loopback mode.
# Set to "true" for local development, leave unset for production
# OAUTH_LOOPBACK_MODE=true

# OAuth Supported Scopes - space-separated list of OAuth scopes to request
# Used in loopback client IDs and client metadata
# Defaults to "atproto transition:generic" if not set
# OAUTH_SUPPORTED_SCOPES=atproto transition:generic

# Admin DIDs (comma-separated list of DIDs that have admin access to backfill, GraphiQL, etc.)
ADMIN_DIDS=did:plc:example1,did:plc:example2

# Server Configuration
# HOST: The interface to bind to (use 0.0.0.0 for Docker, 127.0.0.1 for local dev)
HOST=127.0.0.1
# PORT: The port to listen on
PORT=8080

# Database Configuration
DATABASE_URL=quickslice.db

# Jetstream Configuration
JETSTREAM_URL=wss://jetstream2.us-east.bsky.network/subscribe

# Jetstream Cursor Tracking
# When enabled (default), the server tracks the Jetstream cursor and resumes from the last
# position on restart. This ensures no events are missed during deployments or restarts.
# Set to "true", "1", or "yes" to disable cursor tracking (useful in development to avoid
# backfilling events from previous sessions).
# JETSTREAM_DISABLE_CURSOR=false

# Backfill Configuration
RELAY_URL=https://relay1.us-west.bsky.network
PLC_DIRECTORY_URL=https://plc.directory
