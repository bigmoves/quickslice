# AIP (AT Protocol Identity Provider) Configuration
AIP_BASE_URL=https://auth.example.com

# OAuth Configuration
# SECRET_KEY_BASE: Must be at least 64 characters. Generate with: openssl rand -base64 48
# IMPORTANT: This MUST be persistent across server restarts or sessions will be invalidated
SECRET_KEY_BASE=CHANGE_ME_TO_A_RANDOM_64_CHARACTER_STRING

# OAuth Auto-Registration (recommended)
# When enabled, the server will automatically register as an OAuth client with your AIP server
# on startup if no credentials exist. Credentials are stored in the database config table.
ENABLE_OAUTH_AUTO_REGISTER=true

# OAuth Client Credentials (manual configuration - optional)
# If you set these environment variables, they will override auto-registered credentials.
# You can leave these commented out if using auto-registration.
# OAUTH_CLIENT_ID=your_client_id
# OAUTH_CLIENT_SECRET=your_client_secret

# External Base URL - used to construct the OAuth redirect URI
# The redirect URI will be: ${EXTERNAL_BASE_URL}/oauth/callback
# Defaults to http://localhost:8000 if not set
# EXTERNAL_BASE_URL=http://localhost:8000

# Admin DIDs (comma-separated list of DIDs that have admin access to backfill, GraphiQL, etc.)
ADMIN_DIDS=did:plc:example1,did:plc:example2

# Note: OAuth uses AIP_BASE_URL as the authorization server URL

# Server Configuration
# HOST: The interface to bind to (use 0.0.0.0 for Docker, 127.0.0.1 for local dev)
HOST=127.0.0.1
# PORT: The port to listen on
PORT=8000

# Database Configuration
DATABASE_URL=quickslice.db

# Jetstream Configuration
JETSTREAM_URL=wss://jetstream2.us-east.bsky.network/subscribe

# Jetstream Cursor Tracking
# When enabled (default), the server tracks the Jetstream cursor and resumes from the last
# position on restart. This ensures no events are missed during deployments or restarts.
# Set to "true", "1", or "yes" to disable cursor tracking (useful in development to avoid
# backfilling events from previous sessions).
# JETSTREAM_DISABLE_CURSOR=false

# Backfill Configuration
RELAY_URL=https://relay1.us-west.bsky.network
PLC_DIRECTORY_URL=https://plc.directory
